.MODEL SMALL
.STACK 100H
.DATA
	NEWLINE DB 13,10,'$'

	INPUT DB 'Choose Base System for Input  1)Binary  2)Hexadecimal $'
	 DB 'Enter 16 Digit Input in Binary $'
	HEXA_INPUT DB 'Enter 4 Digit Input in HexaDecimal $'

	OUTPUT DB 'Choose Base System for Output  1)Binary  2)Hexadecimal 3)Decimal $'
	BINARY_OUTPUT DB 'Your Output in Binary is : $'
	HEX_OUTPUT DB 'Your Output in HexaDecimal is : $'
	DECIMAL_OUTPUT DB 'Your Output in Decimal is : $'
	WRONG DB 'You Entered Wrong Input $'
.CODE

MAIN PROC
	MOV AX,@DATA
	MOV DS,AX
	
	MOV DX,OFFSET INPUT
	MOV AH,09
	INT 21H
	CALL PRINTNEWLINE
	
	MOV AH,01
	INT 21H

	CALL PRINTNEWLINE

	CMP AL, '1'
	JE BINARY_INPUT
	
	CMP AL, '2'
	JE HEXA_DECIMAL_INPUT

	JMP WRONGINPUT
	
	BINARY_INPUT:
		MOV DX,OFFSET BINARY_INPUT
		MOV AH,09
		INT 21H
		CALL PRINTNEWLINE
		CALL GET_INPUT_IN_BINARY 
		JMP OUTPUT1
		CALL PRINTNEWLINE

	HEXA_DECIMAL_INPUT:
		MOV DX,OFFSET HEXA_INPUT
		MOV AH,09
		INT 21H
		CALL PRINTNEWLINE
		CALL GET_INPUT_IN_HEX

		CALL PRINTNEWLINE


	OUTPUT1:
		MOV DX,OFFSET OUTPUT
		MOV AH,09
		INT 21H

		CALL PRINTNEWLINE

		MOV AH,01
		INT 21H

		CALL PRINTNEWLINE
		
		CMP AL, '1'
		JE OUPUT_BINARY
	
		CMP AL, '2'
		JE OUTPUT_HEX

		CMP AL, '3'
		JE OUTPUT_DECIMAL

		JMP WRONGINPUT
		
		OUPUT_BINARY:
			MOV DX,OFFSET BINARY_OUTPUT
			MOV AH,09
			INT 21H
			CALL PRINTNEWLINE

			CALL PRINT_OUTPUT_IN_BINARY
			JMP EXIT

		OUTPUT_HEX:
			MOV DX,OFFSET HEX_OUTPUT
			MOV AH,09
			INT 21H

			CALL PRINTNEWLINE
	
			CALL PRINT_OUTPUT_IN_HEX
			JMP EXIT

		OUTPUT_DECIMAL:
			MOV DX,OFFSET DECIMAL_OUTPUT
			MOV AH,09
			INT 21H

			CALL PRINTNEWLINE
	
			CALL PRINT_OUTPUT_IN_DECIMAL
			JMP EXIT
	
	WRONGINPUT:
		MOV DX,OFFSET WRONG
		MOV AH,09
		INT 21H

	EXIT:
		MOV AH,4CH
		INT 21H

MAIN ENDP

PRINTNEWLINE PROC

	MOV DX,OFFSET NEWLINE
	MOV AH,09
	INT 21h
	
	RET
PRINTNEWLINE ENDP

GET_INPUT_IN_HEX PROC

	XOR BX,BX
	MOV CL,4
	MOV CH,4
	WHILE1: 
		MOV AH,1
		INT 21H
		CMP AL,'9'
		JG ALPHABET1
		AND AL,0FH
		JMP IF_WHILE1
		
		ALPHABET1:
			SUB AL,37H
		IF_WHILE1:
			SHL BX,CL
			OR BL,AL
			DEC CH
		  	JNZ WHILE1
	RET

GET_INPUT_IN_HEX ENDP

PRINT_OUTPUT_IN_HEX PROC	
	MOV CL,4
	MOV CH,4
	WHILE2:
		ROL BX,CL
		MOV DL,BL
		AND DL,0FH 
		CMP DL,9
		JG ALPHABET2
		ADD DL,30H
		JMP IF_WHILE2
		
		ALPHABET2:
			ADD DL,37H
		IF_WHILE2:
			MOV AH,02
			INT 21H
			DEC CH
			JNZ WHILE2
	RET
PRINT_OUTPUT_IN_HEX ENDP

GET_INPUT_IN_BINARY PROC
	XOR BX,BX
	MOV CX,16
	WHILE3:
		MOV AH,01
		INT 21H
		SUB AL,30H
		SHL BX,1
		OR BL,AL
		DEC CX
		JNZ WHILE3

	RET
GET_INPUT_IN_BINARY ENDP

PRINT_OUTPUT_IN_BINARY PROC
	MOV CX,16
	WHILE4:
		ROL BX,1
		JNC ZERO
		MOV DL,31H
		JMP IF_WHILE4

		ZERO:
			MOV DL,30H
		IF_WHILE4:
			MOV AH,02
			INT 21H
			DEC CX
			JNZ WHILE4
		
	RET
PRINT_OUTPUT_IN_BINARY ENDP

PRINT_OUTPUT_IN_DECIMAL PROC
	MOV AX,BX
	MOV CX,0
	MOV BX,10

	WHILE5:\
		MOV DX,0
		DIV BX
		PUSH DX
		INC CX
		CMP AX,0
		JNE WHILE5
	
	SAYONARA:
		POP DX
		ADD DX,'0'
		MOV AH,02
		INT 21H
		DEC CX
		JNZ SAYONARA

	RET
PRINT_OUTPUT_IN_DECIMAL ENDP


END MAIN